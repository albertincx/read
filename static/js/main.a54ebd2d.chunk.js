(this["webpackJsonpreact-typescript-template"]=this["webpackJsonpreact-typescript-template"]||[]).push([[0],{129:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(19),u=n.n(o),i=n(59),b=n.n(i),l=n(90),s=n(72),f=n(20),O=(n(99),n(2)),j=O.b.div.withConfig({displayName:"Wrapper__StyledWrapper",componentId:"yajhgc-0"})([""]),d=Object(O.b)(j).withConfig({displayName:"Wrapper___StyledStyledWrapper",componentId:"yajhgc-1"})(["",""],(function(e){return e._css})),p=c.a.memo(Object(a.forwardRef)((function(e,t){var n=e.styles,r=e.as,a=e.appendProps,o=e.children;return c.a.createElement(d,Object.assign({ref:t,as:r},a,{_css:n}),o)}))),m=n(140),g=n(75),v=n(45),h=n(46),y=function(){function e(){Object(v.a)(this,e)}return Object(h.a)(e,[{key:"getFileContent",value:function(e){var t=new FileReader;return t.readAsText(e),new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}}]),e}();!function(e){e[e.FB2=0]="FB2",e[e.TXT=1]="TXT"}(r||(r={}));var E=function(){function e(){Object(v.a)(this,e)}return Object(h.a)(e,[{key:"parse",value:function(e,t){switch(t){case r.FB2:return n=e,Array.from(n.matchAll(/(?<=<p>).+?(?=<\/p>)/gm)).map((function(e){return e[0].replace(/<[^>]*>?/gm,"")}));case r.TXT:return function(e){return[e]}(e);default:return[]}var n}}]),e}(),w=Object(g.buildContainer)({params:{},classes:{fileService:{class:y},bookContentParserService:{class:E}}}),x=n(143),F=n(133),S=n(134),C=n(135),B={background:"#F5F5F8",dimmedBlue0:"#F7F9FA",dimmedBlue1:"#E5E9EB",dimmedBlue2:"#9BA8BB",dimmedBlue3:"#65748A",dimmedBlue4:"#363E4A",blue0:"#F6F9FE",blue1:"#D5E3FB",blue2:"#6699F0",blue3:"#1D6BF6",blue35:"#0848BA",blue4:"#05307B",white:"#FFFFFF",red:"#EF5656",red2:"#EB5757",error:"rgb(239, 86, 86, .15)",blackTransparent:"rgba(0, 0, 0, 0.1)",transparent:"rgba(0, 0, 0, 0)",orangeBackground:"rgba(255, 134, 46, .15)",green:"#A0B336",greenBackground:"rgba(160, 179, 54, .15)",grayBackground:"rgba(101, 116, 138, 0.15)",systemBlue:"#3D7EBB",systemPurple:"#9428C0",systemGreen:"#5BC524",systemRed:"#CE1804",systemYellow:"#F4C524",systemFrenchRose:"#F35588",systemCumin:"#8F4426",systemVictoria:"#4503D0",systemOrange:"#F58546",green0:"#E0F7D4",green1:"#65C99C",green2:"#7EC757",green3:"#49AE13",green35:"#2C7406",greenOverlay:"#e4f3dc",orange:"#FF862E",orange2:"#FA9F5A"},k=x.a,_=Object(F.a)((function(e){return B[e]||e})),A=function(e){return Object(S.a)(String,e)?e:"".concat(e,"px")};Object(F.a)((function(e,t){return A(t[e])})),Object(F.a)((function(e,t){return"".concat(t[e],"px")}));function T(e){return Object(O.a)(["background-color:",";"],_(e))}Object(O.a)(["border:0;"]);Object(C.a)(k,(function(e){return Object(O.a)(["width:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["min-width:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["max-width:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["height:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["min-height:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["max-height:",";"],A(e))}));var R,I=Object(O.a)(["display:flex;"]),N=(Object(O.a)(["display:inline-flex;"]),Object(O.a)(["flex-wrap:wrap;"]),Object(C.a)(k,(function(e){return Object(O.a)(["flex:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["flex-grow:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["flex-basis:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["flex-shrink:",";"],e)})),Object(O.a)(["width:100%;"])),W=Object(O.a)(["height:100%;"]),P=(Object(O.a)(["flex-direction:column;"]),Object(C.a)(k,(function(e){return Object(O.a)(["margin:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["margin-left:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["margin-right:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["margin-top:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["margin-bottom:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["padding:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["padding-left:","px;"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["padding-right:","px;"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["padding-top:","px;"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["padding-bottom:","px;"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["border-radius:",";"],A(e))})));Object(C.a)((function(e){var t=Object(f.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];return"".concat(n,"_").concat(r,"_").concat(a,"_").concat(c)}),(function(e){var t=Object(f.a)(e,4),n=t[0],r=t[1],a=t[2],c=t[3];return Object(O.a)(["box-shadow:"," "," "," ",";"],A(n),A(r),A(a),_(c))})),Object(C.a)(k,(function(e){return Object(O.a)(["position:",";"],e)})),Object(O.a)(["position:fixed;position:-webkit-sticky;position:sticky;"]),Object(C.a)(k,(function(e){return Object(O.a)(["left:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["right:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["top:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["bottom:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["transform:",";"],e)})),Object(O.a)(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]);!function(e){e.START="flex-start",e.END="flex-end",e.CENTER="center",e.SPACE_AROUND="space-around",e.SPACE_BETWEEN="space-between",e.STRETCH="stretch",e.BASELINE="baseline"}(R||(R={}));var L,D=Object(C.a)(k,(function(e){return Object(O.a)(["justify-content:",";"],e)})),z=(Object(C.a)(k,(function(e){return Object(O.a)(["align-self:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["align-items:",";"],e)}))),H=(Object(C.a)(k,(function(e){return Object(O.a)(["z-index:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["transition:",";"],e)})),Object(O.a)(["overflow-y:auto;"]),Object(O.a)(["overflow-x:auto;"]),Object(C.a)(k,(function(e){return Object(O.a)(["overflow:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["overflow-x:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["overflow-y:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["text-overflow:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["display:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["opacity:",";"],e)})),Object(O.a)(["cursor:pointer;"]),Object(O.a)(["cursor:default;"]),Object(C.a)(k,(function(e){return Object(O.a)(["line-height:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["font-size:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["letter-spacing:",";"],A(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["font-weight:",";"],e)})),Object(O.a)(["white-space:nowrap;"]),Object(O.a)(["white-space:normal;"]),Object(O.a)(["display:block;&::first-letter{text-transform:capitalize;}"]),Object(C.a)(k,(function(e){return Object(O.a)(["text-transform:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["*{","}"],e)})),Object(C.a)(k,(function(e){var t=_(e);return Object(O.a)(["color:",";fill:",";"],t,t)})));Object(C.a)(k,(function(e){return Object(O.a)([":hover,:hover span{color:",";}"],_(e))})),Object(C.a)(k,(function(e){return Object(O.a)(["float:",";"],e)})),Object(C.a)(k,(function(e){return Object(O.a)(["text-align:",";"],e)}));!function(e){e.ALL="*",e.IMAGE=".jpeg, .jpg, .png, .bmp",e.BOOKS=".fb2"}(L||(L={}));var J=c.a.memo((function(e){var t=e.maxSize,n=e.accept,r=void 0===n?L.ALL:n,a=e.view,o=e.onFileLoaded,u=c.a.useRef();return c.a.useEffect((function(){return u.current=document.createElement("input"),u.current.accept=r,u.current.type="file",u.current.style.display="none",u.current.onchange=function(e){var n=e.target.files[0];n&&(u.current.value="",t&&n.size>t||o(n))},document.body.appendChild(u.current),function(){return document.body.removeChild(u.current)}}),[]),a((function(){return u.current&&u.current.click()}))}));var G=n(136),K=n(76),U=n(141),X=n(138);var M=n(137),V=n(142),Y=function(e){var t=e.sentences,n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],o=r[1],u=Object(a.useState)(300),i=Object(f.a)(u,2),b=i[0],l=i[1],s=Object(a.useRef)([0,0]),O=Object(a.useRef)(),j=function(){var e=Object(a.useState)(),t=Object(f.a)(e,2)[1];return Object(a.useCallback)((function(){return t({})}),[])}();function d(){var e=[s.current[0],s.current[1]+1];return Object(V.a)(e,t)?(s.current=e,void j()):(e=[s.current[0]+1,0],Object(V.a)(e,t)?(s.current=e,void j()):void 0)}function p(){m(),o(!0),O.current=Object(M.a)(b).subscribe(d)}function m(){var e;null===(e=O.current)||void 0===e||e.unsubscribe(),o(!1)}return Object(a.useEffect)((function(){c&&(m(),p())}),[b]),{wordIndex:s.current,setWordIndex:function(e){s.current=e,j()},start:p,stop:m,pause:function(){var e;return null===(e=O.current)||void 0===e?void 0:e.unsubscribe()},setSpeed:l,speed:b,isWorking:c}};function q(){var e=Object(K.a)(["\n          background-color: yellow;\n        "]);return q=function(){return e},e}var Q=O.b.div.withConfig({displayName:"HumanSpeedReader__StyledHumanSpeedReader",componentId:"te72ep-0"})(["display:flex;flex-direction:column;width:90%;height:100%;"]),Z=(O.b.div.withConfig({displayName:"HumanSpeedReader__WordContainer",componentId:"te72ep-1"})(["display:flex;width:100%;height:100%;font-size:64px;font-weight:bold;justify-content:center;align-items:center;"]),O.b.span.withConfig({displayName:"HumanSpeedReader__WordInText",componentId:"te72ep-2"})(["cursor:pointer;:hover{background-color:whitesmoke;}",""],(function(e){return e.active?Object(O.a)(q()):null}))),$=c.a.memo((function(e){var t=e.sentences,n=Y({sentences:t}),r=n.start,o=n.setSpeed,u=n.speed,i=n.pause,b=n.wordIndex,l=n.isWorking,s=n.setWordIndex,O=Object(a.useState)(u),j=Object(f.a)(O,2),d=j[0],g=j[1],v=function(e,t){var n=Object(a.useRef)(),r=Object(a.useCallback)((function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];n&&clearTimeout(n.current),n.current=setTimeout((function(){e.apply(void 0,a)}),t)}),[]);return Object(a.useEffect)((function(){clearTimeout(n.current)}),[e,t]),r}(o,1e3);return c.a.createElement(Q,null,l?c.a.createElement(p,null,c.a.createElement(U.a.Group,{value:"",onChange:function(e){switch(e.target.value){case"start":r();break;case"pause":i();break;default:return}}},c.a.createElement(U.a.Button,{value:"start"},"\u0421\u0442\u0430\u0440\u0442"),c.a.createElement(U.a.Button,{value:"pause"},"\u041f\u0430\u0443\u0437\u0430")),c.a.createElement(X.a,{tooltipVisible:!0,value:d,min:10,max:1500,onChange:function(e){g(e),v(e)}})):c.a.createElement(m.a,{onClick:function(){r()}},"\u041d\u0430\u0447\u0430\u0442\u044c \u0447\u0442\u0435\u043d\u0438\u0435"),c.a.createElement(p,{styles:[T("dimmedBlue0"),H("dimmedBlue4")]},function(){var e=Object(f.a)(b,2),n=e[0],r=e[1],a=n<5?0:n-5,o=n+5;return t.slice(a,o).map((function(e,t){var o=a+t,u=o===n;return c.a.createElement(p,{key:t,styles:[u?T("dimmedBlue1"):[],P(2)]},e.map((function(e,t){var n=u&&r===t;return c.a.createElement("span",{key:t},c.a.createElement(Z,{onClick:function(){return s([o,t])},active:n},e)," ")})))}))}()))})),ee=[];if(localStorage.getItem("apiprocread_cache")){var te=localStorage.getItem("apiprocread_cache");null!==te&&(ee=JSON.parse(te))}var ne=function(e,t){var n=c.a.memo(t);return function(t){var r=e();return c.a.createElement(n,Object.assign({},t,r))}}((function(){return{fileService:w.get("fileService"),bookContentParserService:w.get("bookContentParserService")}}),(function(e){var t=e.fileService,n=e.bookContentParserService,o=Object(a.useState)(ee||[]),u=Object(f.a)(o,2),i=u[0],O=u[1];console.log(i);var j=function(){var e=Object(s.a)(b.a.mark((function e(a){var c,o,u,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(l.a)(i),e.next=3,t.getFileContent(a);case 3:o=e.sent,u=n.parse(o,r.FB2),s=u.map(Object(G.a)(" ")),null===i||void 0===i||i.push(s),console.log(c),O(i.map((function(e){return e})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return localStorage.getItem("apiprocread_cache")||2!==i.length||localStorage.setItem("apiprocread_cache",JSON.stringify(i)),console.log(W),c.a.createElement(p,{styles:[I,W,N,D(R.CENTER),z(R.CENTER)]},2!==(null===i||void 0===i?void 0:i.length)?c.a.createElement(c.a.Fragment,null,c.a.createElement(J,{accept:L.BOOKS,onFileLoaded:j,view:function(e){return c.a.createElement(m.a,{onClick:e},"Upload 1")}}),c.a.createElement(J,{accept:L.BOOKS,onFileLoaded:j,view:function(e){return c.a.createElement(m.a,{onClick:e},"Upload 2")}})):c.a.createElement($,{sentences:i[0],sentences2:i[1]}))}));u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ne,null)),document.getElementById("root"))},94:function(e,t,n){e.exports=n(129)},99:function(e,t,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.a54ebd2d.chunk.js.map