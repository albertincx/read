{"version":3,"sources":["App.js","styles.js","modules/ReactReader/style.js","modules/ReactReader/ReactReader.js","index.js","Components.js","modules/EpubView/style.js","modules/EpubView/EpubView.js"],"names":["storage","global","localStorage","apiprocread_cache","App","props","onLocationChanged","location","setState","setItem","getRendition","rendition","largeText","state","themes","fontSize","handleChangeFile","event","results","a","length","e","file","type","alert","localFile","target","result","localforage","name","catch","err","then","value","console","log","localName","triggerPage","page","parentPage","fullscreen","getItem","filename","this","className","as","onChange","url","title","locationChanged","Component","GlobalStyle","createGlobalStyle","reactReaderStyles","container","overflow","height","readerArea","position","zIndex","width","backgroundColor","transition","containerExpanded","transform","titleArea","top","left","right","textAlign","color","Swipeable","reader","swipeWrapper","bottom","prev","next","arrow","outline","border","background","marginTop","padding","fontFamily","cursor","userSelect","appearance","fontWeight","arrowHover","tocBackground","tocArea","overflowY","WebkitOverflowScrolling","tocAreaButton","display","borderBottom","boxSizing","tocButton","borderRadius","tocButtonExpanded","tocButtonBar","margin","tocButtonBarTop","tocButtonBottom","loadingView","margintop","children","style","handlers","useSwipeable","TocItem","setLocation","href","label","styles","onClick","PureComponent","ReactReader","toggleToc","expandedToc","node","readerRef","current","nextPage","prevPage","onTocChange","toc","tocChanged","loc","React","createRef","prevProps","prevState","snapshot","location0","triggeredPage","map","item","i","key","Object","assign","showToc","swipeable","onSwipedRight","onSwipedLeft","trackMouse","EpubView","ref","defaultProps","defaultStyles","render","document","getElementById","Container","styled","div","ReaderContainer","Bar","header","breakpoint","ButtonWrapper","Button","img","button","GenericButton","epubViewStyles","viewHolder","view","ePub","Epub","onLocationChange","newLocation","start","handleKeyPress","isLoaded","viewerRef","book","initBook","addEventListener","epubInitOptions","destroy","loaded","navigation","initReader","removeEventListener","nextProps","epubOptions","renderTo","contained","registerEvents","handleTextSelected","on","renderBook"],"mappings":"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","file":"static/js/main.d5dc38cb.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport localforage from \"localforage\";\nimport FileReaderInput from \"react-file-reader-input\";\n\nimport { GlobalStyle } from \"./styles\";\nimport { ReactReader } from \"./modules\";\nimport {\n  Container,\n  ReaderContainer,\n  Bar,\n  GenericButton,\n  ButtonWrapper\n} from \"./Components\";\n\nconst storage = global.localStorage || null;\n\nconst DEMO_URL = \"/files/Dostoevskiyi_F._Spisokshkolnoy._Prestuplenie_I_Nakazanie.epub\";\nconst DEMO_NAME = \"Dostoevskiyi_F._Spisokshkolnoy._Prestuplenie_I_Nakazanie\";\n\nlet apiprocread_cache = [];\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fullscreen: false,\n      localFile: apiprocread_cache || null,\n      localName: null,\n      location:\n        storage && storage.getItem(\"epub-location\")\n          ? storage.getItem(\"epub-location\")\n          : 2,\n      largeText: false,\n      parentPage: false\n    };\n    this.rendition = null;\n  }\n\n  componentDidMount() {\n    localforage.getItem('apiprocread_cache').then(async (value) => {\n      const filename = await localforage.getItem('apiprocread_cache_name').catch(function(err) {\n      }) || ''\n      this.setState({localFile: value, localName: filename});\n    }).catch(function(err) {\n    });\n  }\n\n  onLocationChanged = location => {\n    this.setState(\n      {\n        location\n      },\n      () => {\n        storage && storage.setItem(\"epub-location\", location);\n      }\n    );\n  };\n\n  getRendition = rendition => {\n    const { largeText } = this.state;\n    this.rendition = rendition;\n    rendition.themes.fontSize(largeText ? \"140%\" : \"100%\");\n  };\n\n  handleChangeFile = async (event, results) => {\n    if (results.length > 0) {\n      const [e, file] = results[0];\n      if (file.type !== \"application/epub+zip\") {\n        return alert(\"Unsupported type\");\n      }\n      const localFile = e.target.result\n      await localforage.setItem('apiprocread_cache_name', file.name).catch(function(err) {\n      })\n      await localforage.setItem('apiprocread_cache', localFile).then(function (value) {\n      }).catch(function(err) {\n      });\n      console.log(file.name);\n      this.setState({\n        localFile: localFile,\n        localName: file.name,\n        location: null\n      });\n    }\n  };\n\n  triggerPage = (page)  => {\n    this.setState({parentPage: page})\n  }\n\n  render() {\n    const {\n      fullscreen,\n      location,\n      localFile,\n      localName,\n    } = this.state;\n    return (\n      <Container>\n        <GlobalStyle />\n        <Bar>\n          <ButtonWrapper className=\"btns\">\n            <FileReaderInput as=\"buffer\" onChange={this.handleChangeFile}>\n              <GenericButton className=\"title\">Upload epub</GenericButton>\n            </FileReaderInput>\n            <div className=\"title\">{localName || ''}</div>\n          </ButtonWrapper>\n        </Bar>\n        <ReaderContainer fullscreen={fullscreen}>\n          <ReactReader\n            className=\"firstLayer\"\n            triggerPage={this.triggerPage}\n            url={localFile || DEMO_URL}\n            title=\"\"\n            location={location}\n            locationChanged={this.onLocationChanged}\n            getRendition={this.getRendition}\n          />\n        </ReaderContainer>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import {createGlobalStyle} from \"styled-components\";\n\nexport const GlobalStyle = createGlobalStyle`\n  * {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n    margin: 0;\n    padding: 0;\n    color: inherit;\n    font-size: inherit;\n    font-weight: 300;\n    line-height: 1.4;\n    word-break: break-word;\n  }\n  html {\n    font-size: 62.5%;\n  }\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n    font-size: 1.8rem;\n    background: #333;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n  }\n  #tran-a {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 0;\n    width: 100%;\n    height: 100%;\n  }\n  #translateLayer-border {\n  position: absolute;\n  border: 27px solid #777;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  }\n  #translateLayer {\n  font-size: 16px;\n    position: absolute;\n    top: 0;\n    left: 1rem;\n    right: 1rem;\n    bottom: 1rem;\n    -webkit-transition: all 0.6s ease;\n    transition: all 0.6s ease;\n    0 0 5px rgba(0,0,0,.3): ;\n    opacity: 0;\n    margin: 27px 17px;\n  }\n  a#tran-a {text-decoration: none;}\n  #translateLayer {opacity: 0; }\n  #translateLayer div div {\n  z-index: 0 !important;\n   }\n  #translateLayer.show {opacity: 1;}\n  #tran-a.show {\n  z-index: 1 !important;\n  }\n  #translateLayer button {\n  z-index: 1;\n  display:none;\n  }\n  #translateLayer.show button {\n  z-index: 3\n  }\n  .firstLayer button {\n    z-index: 2;\n  }\n  .firstLayer button:last-child {\n    z-index: 2;\n  }\n  .btns {\n    display: flex;\n    justify-content: space-between !important;\n  }\n  .title {\n    font-size: 1.1rem;\n    text-align: center;\n    color: rgb(153, 153, 153);\n  }\n  .firstLayer button {\n  }\n  button.second-btn {\n    margin-top: -105px  !important;\n  }\n  .second-btn.left {\n  \n  }\n`;","const reactReaderStyles = {\n  container: {\n    overflow: \"hidden\",\n    height: \"100%\"\n  },\n  readerArea: {\n    position: \"relative\",\n    zIndex: 1,\n    height: \"100%\",\n    width: \"100%\",\n    backgroundColor: \"#fff\",\n    transition: \"all .3s ease\"\n  },\n  containerExpanded: {\n    transform: \"translateX(256px)\"\n  },\n  titleArea: {\n    \"font-size\": \"10px\",\n    position: \"absolute\",\n    top: 20,\n    left: 50,\n    right: 50,\n    textAlign: \"center\",\n    color: \"#999\"\n  },\n  Swipeable: {\n    height: \"100%\",\n  },\n  reader: {\n    height: \"100%\",\n    // position: \"absolute\",\n    // top: 50,\n    // left: 50,\n    // bottom: 20,\n    // right: 50\n  },\n  swipeWrapper: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 200\n  },\n  prev: {\n    left: 1\n  },\n  next: {\n    right: 1\n  },\n  arrow: {\n    outline: \"none\",\n    border: \"none\",\n    background: \"none\",\n    position: \"absolute\",\n    top: \"50%\",\n    marginTop: -32,\n    fontSize: 50,\n    padding: \"0 10px\",\n    color: \"#E2E2E2\",\n    fontFamily: \"arial, sans-serif\",\n    cursor: \"pointer\",\n    userSelect: \"none\",\n    appearance: \"none\",\n    fontWeight: \"normal\"\n  },\n  arrowHover: {\n    color: \"#777\"\n  },\n  tocBackground: {\n    position: \"absolute\",\n    left: 256,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 1\n  },\n  tocArea: {\n    position: \"absolute\",\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 0,\n    width: 256,\n    overflowY: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    background: \"#f2f2f2\",\n    padding: \"10px 0\"\n  },\n  tocAreaButton: {\n    userSelect: \"none\",\n    appearance: \"none\",\n    background: \"none\",\n    border: \"none\",\n    display: \"block\",\n    fontFamily: \"sans-serif\",\n    width: \"100%\",\n    fontSize: \".9em\",\n    textAlign: \"left\",\n    padding: \".9em 1em\",\n    borderBottom: \"1px solid #ddd\",\n    color: \"#aaa\",\n    boxSizing: \"border-box\",\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButton: {\n    background: \"none\",\n    border: \"none\",\n    width: 32,\n    height: 32,\n    position: \"absolute\",\n    top: 10,\n    left: 10,\n    borderRadius: 2,\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButtonExpanded: {\n    background: \"#f2f2f2\"\n  },\n  tocButtonBar: {\n    position: \"absolute\",\n    width: \"60%\",\n    background: \"#ccc\",\n    height: 2,\n    left: \"50%\",\n    margin: \"-1px -30%\",\n    top: \"50%\",\n    transition: \"all .5s ease\"\n  },\n  tocButtonBarTop: {\n    top: \"35%\"\n  },\n  tocButtonBottom: {\n    top: \"66%\"\n  },\n  loadingView: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"10%\",\n    right: \"10%\",\n    color: \"#ccc\",\n    textAlign: \"center\",\n    margintop: \"-.5em\"\n  }\n};\n\nexport default reactReaderStyles\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSwipeable } from 'react-swipeable';\nimport { EpubView } from '..';\nimport defaultStyles from './style';\n\nconst Swipeable = ({ children, style, ...props }) => {\n  const handlers = useSwipeable(props);\n  return (<div style={style} {...handlers}>{children}</div>);\n};\n\nclass TocItem extends PureComponent {\n  setLocation = () => {\n    this.props.setLocation(this.props.href);\n  };\n\n  render() {\n    const { label, styles } = this.props;\n    return (\n      <button onClick={this.setLocation} style={styles}>\n        {label}\n      </button>\n    );\n  }\n}\n\nTocItem.propTypes = {\n  label: PropTypes.string,\n  href: PropTypes.string,\n  setLocation: PropTypes.func,\n  styles: PropTypes.object,\n};\n\nclass ReactReader extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.readerRef = React.createRef();\n    this.state = {\n      expandedToc: false,\n      toc: false,\n    };\n  }\n\n  toggleToc = () => {\n    this.setState({\n      expandedToc: !this.state.expandedToc,\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if ((\n      prevProps.location0 !== this.props.location0\n    )) {\n      const node = this.readerRef.current;\n      if (node) {\n        if (this.props.triggeredPage === 'next') {\n          node.nextPage();\n        } else if (this.props.triggeredPage === 'prev') {\n          node.prevPage();\n        }\n      }\n    }\n  }\n\n  next = () => {\n    const node = this.readerRef.current;\n    if (this.props.triggerPage) this.props.triggerPage('next');\n    node.nextPage();\n  };\n\n  prev = () => {\n    const node = this.readerRef.current;\n    if (this.props.triggerPage) this.props.triggerPage('prev');\n    node.prevPage();\n  };\n\n  onTocChange = toc => {\n    const { tocChanged } = this.props;\n    this.setState(\n      {\n        toc: toc,\n      },\n      () => tocChanged && tocChanged(toc),\n    );\n  };\n\n  renderToc() {\n    const { toc, expandedToc } = this.state;\n    const { styles } = this.props;\n    return (\n      <div>\n        <div style={styles.tocArea}>\n          <div style={styles.toc}>\n            {toc.map((item, i) => (\n              <TocItem\n                {...item}\n                key={i}\n                setLocation={this.setLocation}\n                styles={styles.tocAreaButton}\n              />\n            ))}\n          </div>\n        </div>\n        {expandedToc && (\n          <div style={styles.tocBackground} onClick={this.toggleToc}/>\n        )}\n      </div>\n    );\n  }\n\n  setLocation = loc => {\n    const { locationChanged } = this.props;\n    this.setState(\n      {\n        expandedToc: false,\n      },\n      () => locationChanged && locationChanged(loc),\n    );\n  };\n\n  renderTocToggle() {\n    const { expandedToc } = this.state;\n    const { styles } = this.props;\n    return (\n      <button\n        style={Object.assign(\n          {},\n          styles.tocButton,\n          expandedToc ? styles.tocButtonExpanded : {},\n        )}\n        onClick={this.toggleToc}\n      >\n        <span\n          style={Object.assign({}, styles.tocButtonBar, styles.tocButtonBarTop)}\n        />\n        <span\n          style={Object.assign({}, styles.tocButtonBar, styles.tocButtonBottom)}\n        />\n      </button>\n    );\n  }\n\n  render() {\n    const {\n      showToc,\n      loadingView,\n      styles,\n      locationChanged,\n      swipeable,\n      className,\n      ...props\n    } = this.props;\n    const { expandedToc } = this.state;\n    return (\n      <div className={className} style={styles.container}>\n        <div\n          style={Object.assign(\n            {},\n            styles.readerArea,\n            expandedToc ? styles.containerExpanded : {},\n          )}\n        >\n          <Swipeable\n            onSwipedRight={this.prev}\n            onSwipedLeft={this.next}\n            trackMouse\n            style={styles.Swipeable}\n          >\n            <div style={styles.reader}>\n              <EpubView\n                ref={this.readerRef}\n                loadingView={loadingView}\n                {...props}\n                tocChanged={this.onTocChange}\n                locationChanged={locationChanged}\n              />\n              {swipeable && <div style={styles.swipeWrapper}/>}\n            </div>\n          </Swipeable>\n          <button\n            className=\"second-btn left\"\n            style={Object.assign({}, styles.arrow, styles.prev)}\n            onClick={this.next}\n          >\n            ›\n          </button>\n          <button\n            style={Object.assign({}, styles.arrow, styles.prev)}\n            onClick={this.prev}\n          >\n            ‹\n          </button>\n          <button\n            className=\"second-btn right\"\n            style={Object.assign({}, styles.arrow, styles.next)}\n            onClick={this.prev}\n          >\n            ‹\n          </button>\n          <button\n            style={Object.assign({}, styles.arrow, styles.next)}\n            onClick={this.next}\n          >\n            ›\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nReactReader.defaultProps = {\n  loadingView: <div style={defaultStyles.loadingView}>Loading…</div>,\n  locationChanged: null,\n  tocChanged: null,\n  showToc: true,\n  styles: defaultStyles,\n};\n\nReactReader.propTypes = {\n  loadingView: PropTypes.element,\n  showToc: PropTypes.bool,\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  swipeable: PropTypes.bool,\n};\n\nexport default ReactReader;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./App\";\nimport 'toastify-js/src/toastify.css';\nrender(<App />, document.getElementById(\"root\"));\n","import styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\n\nexport const Container = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n  overflow: hidden;\n`;\nexport const ReaderContainer = styled.div`\n  font-size: 16px;\n  position: absolute;\n  top: ${props => (props.fullscreen ? 0 : 60)}px;\n  left: ${props => (props.fullscreen ? 0 : 1)}rem;\n  right: ${props => (props.fullscreen ? 0 : 1)}rem;\n  bottom: ${props => (props.fullscreen ? 0 : 1)}rem;\n  transition: all 0.6s ease;\n  padding: 0px;\n  ${props => !props.fullscreen && \"0 0 5px rgba(0,0,0,.3);\"};\n`;\nexport const Bar = styled.header`\n  position: absolute;\n  top: 10px;\n  left: 20px;\n  right: 20px;\n\n  ${breakpoint(\"tablet\")`\n  `};\n`;\nexport const ButtonWrapper = styled.div`\n  ${breakpoint(\"mobile\")`\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  `};\n`;\nexport const LogoWrapper = styled.a`\n  ${breakpoint(\"tablet\")`\n    margin-right: auto;\n  `};\n`;\nexport const Logo = styled.img`\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ${breakpoint(\"tablet\")`\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  `};\n`;\nconst Button = styled.button`\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n`;\nexport const GenericButton = styled(Button)`\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ${breakpoint(\"tablet\")`\n    font-size: 16px;\n\n  `};\n`;\nexport const CloseIcon = styled.i`\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n`;\nexport const FontSizeButton = styled(Button)`\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n`;\n","const epubViewStyles = {\n  viewHolder: {\n    position: \"relative\",\n    height: \"100%\",\n    width: \"100%\"\n  },\n  view: {\n    height: \"100%\"\n  }\n};\n\nexport default epubViewStyles\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Epub from \"epubjs/lib/index\";\nimport defaultStyles from \"./style\";\n\nglobal.ePub = Epub; // Fix for v3 branch of epub.js -> needs ePub to by a global var\n\nclass EpubView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoaded: false,\n      toc: []\n    };\n    this.viewerRef = React.createRef();\n    this.location = props.location;\n    this.book = this.rendition = this.prevPage = this.nextPage = null;\n  }\n\n  componentDidMount() {\n    this.initBook(true);\n    document.addEventListener(\"keyup\", this.handleKeyPress, false);\n  }\n\n  initBook() {\n    const { url, tocChanged, epubInitOptions } = this.props;\n    if (this.book) {\n      this.book.destroy();\n    }\n    this.book = new Epub(url, epubInitOptions);\n    this.book.loaded.navigation.then(({ toc }) => {\n      this.setState(\n        {\n          isLoaded: true,\n          toc: toc\n        },\n        () => {\n          tocChanged && tocChanged(toc);\n          this.initReader();\n        }\n      );\n    });\n  }\n\n  componentWillUnmount() {\n    this.book = this.rendition = this.prevPage = this.nextPage = null;\n    document.removeEventListener(\"keyup\", this.handleKeyPress, false);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return (\n      !this.state.isLoaded ||\n      nextProps.location !== this.props.location ||\n      nextProps.location !== this.props.location\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.location !== this.props.location &&\n      this.location !== this.props.location && this.rendition\n    ) {\n      this.rendition.display(this.props.location);\n    }\n    if (prevProps.url !== this.props.url) {\n      this.initBook();\n    }\n  }\n\n  initReader() {\n    const { toc } = this.state;\n    const { location, epubOptions, getRendition } = this.props;\n    const node = this.viewerRef.current;\n    this.rendition = this.book.renderTo(node, {\n      contained: true,\n      width: \"100%\",\n      height: \"100%\",\n      ...epubOptions\n    });\n\n    this.prevPage = () => {\n      this.rendition.prev();\n    };\n    this.nextPage = () => {\n      this.rendition.next();\n    };\n    this.registerEvents();\n    getRendition && getRendition(this.rendition);\n\n    if(typeof location === \"string\" || typeof location === \"number\") {\n      this.rendition.display(location);\n    } else if(toc.length > 0 && toc[0].href) {\n      this.rendition.display(toc[0].href);\n    } else {\n      this.rendition.display();\n    }\n  }\n\n  registerEvents() {\n    const { handleKeyPress, handleTextSelected } = this.props;\n    this.rendition.on(\"locationChanged\", this.onLocationChange);\n    this.rendition.on(\"keyup\", handleKeyPress || this.handleKeyPress);\n    if (handleTextSelected) {\n      this.rendition.on('selected', handleTextSelected);\n    }\n  }\n\n  onLocationChange = loc => {\n    const { location, locationChanged } = this.props;\n    const newLocation = loc && loc.start;\n    if (location !== newLocation) {\n      this.location = newLocation;\n      locationChanged && locationChanged(newLocation);\n    }\n  };\n\n  renderBook() {\n    const { styles } = this.props;\n    return <div ref={this.viewerRef} style={styles.view} />;\n  }\n\n  handleKeyPress = ({ key }) => {\n    key && key === \"ArrowRight\" && this.nextPage();\n    key && key === \"ArrowLeft\" && this.prevPage();\n  };\n\n  render() {\n    const { isLoaded } = this.state;\n    const { loadingView, styles } = this.props;\n    return (\n      <div className=\"epubjs-wrap\" style={styles.viewHolder}>\n        {(isLoaded && this.renderBook()) || loadingView}\n      </div>\n    );\n  }\n}\n\nEpubView.defaultProps = {\n  loadingView: null,\n  locationChanged: null,\n  tocChanged: null,\n  styles: defaultStyles,\n  epubOptions: {},\n  epubInitOptions: {}\n};\n\nEpubView.propTypes = {\n  url: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.instanceOf(ArrayBuffer)\n  ]),\n  loadingView: PropTypes.element,\n  location: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  epubInitOptions: PropTypes.object,\n  epubOptions: PropTypes.object,\n  getRendition: PropTypes.func,\n  handleKeyPress: PropTypes.func,\n  handleTextSelected: PropTypes.func\n};\n\nexport default EpubView;\n"],"sourceRoot":""}