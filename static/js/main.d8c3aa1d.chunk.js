(this["webpackJsonpreact-reader"]=this["webpackJsonpreact-reader"]||[]).push([[0],{118:function(t,e,n){"use strict";(function(t){var o=n(37),i=n.n(o),r=n(31),a=n(75),c=n(21),s=n(22),l=n(24),u=n(23),d=n(6),p=n(1),h=n(0),f=n(30),g=n.n(f),b=n(5),v=n(76),j=n.n(v),x=n(79),m=n(25);n(232),n(74);function y(){var t=Object(d.a)(['\n  * {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n    margin: 0;\n    padding: 0;\n    color: inherit;\n    font-size: inherit;\n    font-weight: 300;\n    line-height: 1.4;\n    word-break: break-word;\n  }\n  html {\n    font-size: 62.5%;\n  }\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n    font-size: 1.8rem;\n    background: #333;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n  }\n  #tran-a {\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* padding: 20px; */\n    /* background: #565656; */\n    z-index: 0;\n\n    width: 100%;\n    height: 100%;\n  }\n  #translateLayer-border {\n  position: absolute;\n  border: 27px solid #777;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  }\n  #translateLayer {\n  font-size: 16px;\n    position: absolute;\n    top: 0;\n    left: 1rem;\n    right: 1rem;\n    bottom: 1rem;\n    -webkit-transition: all 0.6s ease;\n    transition: all 0.6s ease;\n    0 0 5px rgba(0,0,0,.3): ;\n    opacity: 0;\n    margin: 27px 17px;\n  }\n  a#tran-a {text-decoration: none;}\n  #translateLayer {opacity: 0; }\n  #translateLayer div div {\n  z-index: 0 !important;\n   }\n  #translateLayer.show {opacity: 1;}\n  #tran-a.show {\n  z-index: 1 !important;\n  }\n  .btns {\n  padding-top: 0;\n\n\n  }\n  #translateLayer button {\n  z-index: 1;\n  display:none;\n  }\n  #translateLayer.show button {\n  z-index: 3\n  }\n  .firstLayer button {\n  z-index: 2\n  }\n  .title {\n      z-index: 10;\n    position: absolute;\n    font-size: 0.7em;\n    padding: 7px;\n     margin-left: 20px;\n    }\n']);return y=function(){return t},t}var O=t.localStorage||null,k="/files/Dostoevskiyi_F._Spisokshkolnoy._Prestuplenie_I_NakazanieENGLISH.epub",w="Dostoevskiyi_F._Spisokshkolnoy._Prestuplenie_I_Nakazanie",C=Object(b.a)(y()),L=[],P=[],B=function(e){Object(l.a)(o,e);var n=Object(u.a)(o);function o(e){var s;return Object(c.a)(this,o),(s=n.call(this,e)).toggleFullscreen=function(){s.setState({fullscreen:!s.state.fullscreen},(function(){setTimeout((function(){document.createEvent("UIEvents").initUIEvent("resize",!0,!1,t,0)}),1e3)}))},s.onLocationChanged=function(t){s.setState({location:t},(function(){O&&O.setItem("epub-location",t)}))},s.onLocationChanged2=function(t){s.setState({location2:t},(function(){O&&O.setItem("epub-location2",t)}))},s.getRendition2=function(t){var e=s.state.largeText2;s.rendition2=t,t.themes.fontSize(e?"140%":"100%")},s.getRendition=function(t){var e=s.state.largeText;s.rendition=t,t.themes.fontSize(e?"140%":"100%")},s.handleChangeFile=function(){var t=Object(a.a)(i.a.mark((function t(e,n){var o,a,c,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=8;break}if(o=Object(r.a)(n[0],2),a=o[0],"application/epub+zip"===(c=o[1]).type){t.next=4;break}return t.abrupt("return",alert("Unsupported type"));case 4:return l=a.target.result,t.next=7,g.a.setItem("apiprocread_cache",l).then((function(t){})).catch((function(t){}));case 7:s.setState({localFile:l,localName:c.name,location:null});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s.handleChangeFile2=function(){var t=Object(a.a)(i.a.mark((function t(e,n){var o,a,c,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=8;break}if(o=Object(r.a)(n[0],2),a=o[0],"application/epub+zip"===(c=o[1]).type){t.next=4;break}return t.abrupt("return",alert("Unsupported type"));case 4:return l=a.target.result,t.next=7,g.a.setItem("apiprocread_cache2",l).then((function(t){})).catch((function(t){}));case 7:s.setState({localFile2:l,localName2:c.name,location2:null});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s.mouse=function(t){"BUTTON"===t.target.tagName||"translateLayer-border"!==t.target.getAttribute("id")||(document.getElementById("translateLayer").classList.toggle("show"),document.getElementById("tran-a").classList.toggle("show"))},s.triggerPage=function(t){s.setState({parentPage:t})},s.click=function(t){"BUTTON"===t.target.tagName||"translateLayer-border"!==t.target.getAttribute("id")||(document.getElementById("translateLayer").classList.toggle("show"),document.getElementById("tran-a").classList.toggle("show"))},s.state={fullscreen:!1,localFile:L||null,localName:null,location:O&&O.getItem("epub-location")?O.getItem("epub-location"):2,location2:O&&O.getItem("epub-location2")?O.getItem("epub-location2"):2,localFile2:P||null,localName2:null,largeText:!1,largeText2:!1,parentPage:!1},s.rendition=null,s.rendition2=null,s}return Object(s.a)(o,[{key:"componentDidMount",value:function(){var t=this;g.a.getItem("apiprocread_cache").then((function(e){t.setState({localFile:e})})).catch((function(t){})),g.a.getItem("apiprocread_cache2").then((function(e){t.setState({localFile2:e})})).catch((function(t){}))}},{key:"render",value:function(){var t=this.state,e=t.fullscreen,n=t.location,o=t.location2,i=t.localFile,r=t.localFile2,a=t.localName,c=t.localName2;return Object(p.jsxs)(m.c,{children:[Object(p.jsx)(C,{}),Object(p.jsx)(m.a,{children:Object(p.jsxs)(m.b,{className:"btns",children:[Object(p.jsx)(j.a,{as:"buffer",onChange:this.handleChangeFile,children:Object(p.jsx)(m.d,{children:"Upload epub"})}),Object(p.jsx)(j.a,{as:"buffer",onChange:this.handleChangeFile2,children:Object(p.jsx)(m.d,{children:"Upload Translated epub"})})]})}),Object(p.jsxs)(m.e,{fullscreen:e,children:[Object(p.jsx)(x.b,{className:"firstLayer",triggerPage:this.triggerPage,url:i||"/files/Dostoevskiyi_F._Spisokshkolnoy._Prestuplenie_I_Nakazanie.epub",title:a||w,location:n,locationChanged:this.onLocationChanged,getRendition:this.getRendition}),Object(p.jsxs)("div",{id:"tran-a",onClick:this.click,onTouchEnd:this.click,onTouchStart:this.click,onMouseDown:this.mouse,children:[Object(p.jsx)("div",{className:"title",children:a||w}),Object(p.jsx)("div",{id:"translateLayer-border"}),Object(p.jsx)("div",{id:"translateLayer",children:Object(p.jsx)(x.b,{triggeredPage:this.state.parentPage,url:r||k,title:c||"Dostoevskiyi_F._Spisokshkolnoy._Prestuplenie_I_NakazanieENGLISH",location0:n,location:o,locationChanged:this.onLocationChanged2,getRendition:this.getRendition2})})]})]})]})}}]),o}(h.Component);e.a=B}).call(this,n(14))},124:function(t,e,n){"use strict";n.r(e);var o=n(1),i=(n(0),n(73)),r=n(118);n(233);Object(i.render)(Object(o.jsx)(r.a,{}),document.getElementById("root"))},232:function(t,e,n){"use strict";n(10),n(31),n(74),n(123)},25:function(t,e,n){"use strict";n.d(e,"c",(function(){return y})),n.d(e,"e",(function(){return O})),n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return w})),n.d(e,"d",(function(){return L}));var o=n(6),i=n(5),r=n(32);function a(){var t=Object(o.a)(["\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n"]);return a=function(){return t},t}function c(){var t=Object(o.a)(['\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n']);return c=function(){return t},t}function s(){var t=Object(o.a)(["\n    font-size: 16px;\n\n  "]);return s=function(){return t},t}function l(){var t=Object(o.a)(["\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ",";\n"]);return l=function(){return t},t}function u(){var t=Object(o.a)(["\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n"]);return u=function(){return t},t}function d(){var t=Object(o.a)(["\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  "]);return d=function(){return t},t}function p(){var t=Object(o.a)(["\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ",";\n"]);return p=function(){return t},t}function h(){var t=Object(o.a)(["\n    margin-right: auto;\n  "]);return h=function(){return t},t}function f(){var t=Object(o.a)(["\n  ",";\n"]);return f=function(){return t},t}function g(){var t=Object(o.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  "]);return g=function(){return t},t}function b(){var t=Object(o.a)(["\n  ",";\n"]);return b=function(){return t},t}function v(){var t=Object(o.a)(["\n    display: flex;\n    align-items: flex-end;\n  "]);return v=function(){return t},t}function j(){var t=Object(o.a)(["\n  position: absolute;\n  top: 10px;\n  left: 20px;\n  right: 20px;\n\n  ",";\n"]);return j=function(){return t},t}function x(){var t=Object(o.a)(["\n  font-size: 16px;\n  position: absolute;\n  top: ","px;\n  left: ","rem;\n  right: ","rem;\n  bottom: ","rem;\n  transition: all 0.6s ease;\n  padding: 27px;\n  ",";\n"]);return x=function(){return t},t}function m(){var t=Object(o.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n  overflow: hidden;\n"]);return m=function(){return t},t}var y=i.c.div(m()),O=i.c.div(x(),(function(t){return t.fullscreen?0:44}),(function(t){return t.fullscreen?0:1}),(function(t){return t.fullscreen?0:1}),(function(t){return t.fullscreen?0:1}),(function(t){return!t.fullscreen&&"0 0 5px rgba(0,0,0,.3);"})),k=i.c.header(j(),Object(r.a)("tablet")(v())),w=i.c.div(b(),Object(r.a)("mobile")(g())),C=(i.c.a(f(),Object(r.a)("tablet")(h())),i.c.img(p(),Object(r.a)("tablet")(d())),i.c.button(u())),L=Object(i.c)(C)(l(),Object(r.a)("tablet")(s()));i.c.i(c()),Object(i.c)(C)(a())},50:function(t,e,n){"use strict";e.a={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}}},74:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o="2323"},79:function(t,e,n){"use strict";n.d(e,"a",(function(){return o.a})),n.d(e,"b",(function(){return j}));var o=n(83),i=(n(50),n(21)),r=n(22),a=n(24),c=n(23),s=n(10),l=n(81),u=n(0),d=n.n(u),p=n(1),h=n(119),f={container:{overflow:"hidden",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:10,left:20,bottom:20,right:20},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 5px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",margintop:"-.5em"}},g=function(t){var e=t.children,n=Object(l.a)(t,["children"]),o=Object(h.useSwipeable)(n);return Object(p.jsx)("div",Object(s.a)(Object(s.a)({},o),{},{children:e}))},b=function(t){Object(a.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(i.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))).setLocation=function(){t.props.setLocation(t.props.href)},t}return Object(r.a)(n,[{key:"render",value:function(){var t=this.props,e=t.label,n=t.styles;return Object(p.jsx)("button",{onClick:this.setLocation,style:n,children:e})}}]),n}(u.PureComponent),v=function(t){Object(a.a)(n,t);var e=Object(c.a)(n);function n(t){var o;return Object(i.a)(this,n),(o=e.call(this,t)).toggleToc=function(){o.setState({expandedToc:!o.state.expandedToc})},o.next=function(){var t=o.readerRef.current;o.props.triggerPage&&o.props.triggerPage("next"),t.nextPage()},o.prev=function(){var t=o.readerRef.current;o.props.triggerPage&&o.props.triggerPage("prev"),t.prevPage()},o.onTocChange=function(t){var e=o.props.tocChanged;o.setState({toc:t},(function(){return e&&e(t)}))},o.setLocation=function(t){var e=o.props.locationChanged;o.setState({expandedToc:!1},(function(){return e&&e(t)}))},o.readerRef=d.a.createRef(),o.state={expandedToc:!1,toc:!1},o}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(t,e,n){this.readerRef.current;if(t.location0!==this.props.location0){var o=this.readerRef.current;console.log(o),console.log(t.triggeredPage),console.log(this.props.triggeredPage),o&&("next"===this.props.triggeredPage?o.nextPage():"prev"===this.props.triggeredPage&&o.prevPage())}}},{key:"renderToc",value:function(){var t=this,e=this.state,n=e.toc,o=e.expandedToc,i=this.props.styles;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{style:i.tocArea,children:Object(p.jsx)("div",{style:i.toc,children:n.map((function(e,n){return Object(u.createElement)(b,Object(s.a)(Object(s.a)({},e),{},{key:n,setLocation:t.setLocation,styles:i.tocAreaButton}))}))})}),o&&Object(p.jsx)("div",{style:i.tocBackground,onClick:this.toggleToc})]})}},{key:"renderTocToggle",value:function(){var t=this.state.expandedToc,e=this.props.styles;return Object(p.jsxs)("button",{style:Object.assign({},e.tocButton,t?e.tocButtonExpanded:{}),onClick:this.toggleToc,children:[Object(p.jsx)("span",{style:Object.assign({},e.tocButtonBar,e.tocButtonBarTop)}),Object(p.jsx)("span",{style:Object.assign({},e.tocButtonBar,e.tocButtonBottom)})]})}},{key:"render",value:function(){var t=this.props,e=(t.title,t.showToc,t.loadingView),n=t.styles,i=t.locationChanged,r=t.swipeable,a=t.className,c=Object(l.a)(t,["title","showToc","loadingView","styles","locationChanged","swipeable","className"]),u=this.state,d=(u.toc,u.expandedToc);return Object(p.jsx)("div",{className:a,style:n.container,children:Object(p.jsxs)("div",{style:Object.assign({},n.readerArea,d?n.containerExpanded:{}),children:[Object(p.jsx)(g,{onSwipedRight:this.prev,onSwipedLeft:this.next,trackMouse:!0,children:Object(p.jsxs)("div",{style:n.reader,children:[Object(p.jsx)(o.a,Object(s.a)(Object(s.a)({ref:this.readerRef,loadingView:e},c),{},{tocChanged:this.onTocChange,locationChanged:i})),r&&Object(p.jsx)("div",{style:n.swipeWrapper})]})}),Object(p.jsx)("button",{style:Object.assign({},n.arrow,n.prev),onClick:this.prev,children:"\u2039"}),Object(p.jsx)("button",{style:Object.assign({},n.arrow,n.next),onClick:this.next,children:"\u203a"})]})})}}]),n}(u.PureComponent);v.defaultProps={loadingView:Object(p.jsx)("div",{style:f.loadingView,children:"Loading\u2026"}),locationChanged:null,tocChanged:null,showToc:!0,styles:f};var j=v},83:function(t,e,n){"use strict";(function(t){var o=n(10),i=n(21),r=n(22),a=n(24),c=n(23),s=n(1),l=n(0),u=n.n(l),d=n(77),p=n.n(d),h=n(50);t.ePub=p.a;var f=function(t){Object(a.a)(n,t);var e=Object(c.a)(n);function n(t){var o;return Object(i.a)(this,n),(o=e.call(this,t)).onLocationChange=function(t){var e=o.props,n=e.location,i=e.locationChanged,r=t&&t.start;n!==r&&(o.location=r,i&&i(r))},o.handleKeyPress=function(t){var e=t.key;e&&"ArrowRight"===e&&o.nextPage(),e&&"ArrowLeft"===e&&o.prevPage()},o.state={isLoaded:!1,toc:[]},o.viewerRef=u.a.createRef(),o.location=t.location,o.book=o.rendition=o.prevPage=o.nextPage=null,o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.initBook(!0),document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"initBook",value:function(){var t=this,e=this.props,n=e.url,o=e.tocChanged,i=e.epubInitOptions;this.book&&this.book.destroy(),this.book=new p.a(n,i),this.book.loaded.navigation.then((function(e){var n=e.toc;t.setState({isLoaded:!0,toc:n},(function(){o&&o(n),t.initReader()}))}))}},{key:"componentWillUnmount",value:function(){this.book=this.rendition=this.prevPage=this.nextPage=null,document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"shouldComponentUpdate",value:function(t){return!this.state.isLoaded||t.location!==this.props.location||t.location!==this.props.location}},{key:"componentDidUpdate",value:function(t){t.location!==this.props.location&&this.location!==this.props.location&&this.rendition&&this.rendition.display(this.props.location),t.url!==this.props.url&&this.initBook()}},{key:"initReader",value:function(){var t=this,e=this.state.toc,n=this.props,i=n.location,r=n.epubOptions,a=n.getRendition,c=this.viewerRef.current;this.rendition=this.book.renderTo(c,Object(o.a)({contained:!0,width:"100%",height:"100%"},r)),this.prevPage=function(){t.rendition.prev()},this.nextPage=function(){t.rendition.next()},this.registerEvents(),a&&a(this.rendition),"string"===typeof i||"number"===typeof i?this.rendition.display(i):e.length>0&&e[0].href?this.rendition.display(e[0].href):this.rendition.display()}},{key:"registerEvents",value:function(){var t=this.props,e=t.handleKeyPress,n=t.handleTextSelected;this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",e||this.handleKeyPress),n&&this.rendition.on("selected",n)}},{key:"renderBook",value:function(){var t=this.props.styles;return Object(s.jsx)("div",{ref:this.viewerRef,style:t.view})}},{key:"render",value:function(){var t=this.state.isLoaded,e=this.props,n=e.loadingView,o=e.styles;return Object(s.jsx)("div",{style:o.viewHolder,children:t&&this.renderBook()||n})}}]),n}(l.Component);f.defaultProps={loadingView:null,locationChanged:null,tocChanged:null,styles:h.a,epubOptions:{},epubInitOptions:{}},e.a=f}).call(this,n(14))}},[[124,1,2]]]);
//# sourceMappingURL=main.d8c3aa1d.chunk.js.map