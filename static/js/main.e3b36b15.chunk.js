(this["webpackJsonpreact-reader"]=this["webpackJsonpreact-reader"]||[]).push([[0],{115:function(e,t,n){"use strict";(function(e){var o=n(34),a=n.n(o),i=n(75),r=n(71),c=n(19),l=n(20),s=n(22),u=n(21),d=n(5),p=n(0),h=n.n(p),f=n(28),g=n.n(f),b=n(4),m=n(72),v=n.n(m),y=n(76),x=n(23);function k(){var e=Object(d.a)(['\n  * {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n    margin: 0;\n    padding: 0;\n    color: inherit;\n    font-size: inherit;\n    font-weight: 300;\n    line-height: 1.4;\n    word-break: break-word;\n  }\n  html {\n    font-size: 62.5%;\n  }\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n    font-size: 1.8rem;\n    background: #333;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n  }\n  #tran-a {\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* padding: 20px; */\n    /* background: #565656; */\n    z-index: 4;\n\n    width: 100%;\n    height: 100%;\n  }\n  #translateLayer-border {\n  position: absolute;\n  border: 27px solid #777;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  }\n  #translateLayer {\n  font-size: 16px;\n    position: absolute;\n    top: 0;\n    left: 1rem;\n    right: 1rem;\n    bottom: 1rem;\n    -webkit-transition: all 0.6s ease;\n    transition: all 0.6s ease;\n    0 0 5px rgba(0,0,0,.3): ;\n    opacity: 0;\n    margin: 27px 17px;\n  }\n  a#tran-a {text-decoration: none;}\n  #translateLayer {opacity: 0; }\n  #translateLayer.show {opacity: 1;}\n  .btns {\n  display: flex;\n  justify-content: space-between;\n  width : 100%;\n  }\n  #translateLayer button {\n  z-index: 1;\n  display:none;\n  }\n  #translateLayer.show button {\n  z-index: 3\n  }\n  .firstLayer button {\n  z-index: 2\n  }\n']);return k=function(){return e},e}var w=e.localStorage||null,O=Object(b.a)(k()),j=[],E=[],C=function(t){Object(s.a)(o,t);var n=Object(u.a)(o);function o(t){var l;return Object(c.a)(this,o),(l=n.call(this,t)).toggleFullscreen=function(){l.setState({fullscreen:!l.state.fullscreen},(function(){setTimeout((function(){document.createEvent("UIEvents").initUIEvent("resize",!0,!1,e,0)}),1e3)}))},l.onLocationChanged=function(e){console.log("location"),l.setState({location:e},(function(){w&&w.setItem("epub-location",e)}))},l.onLocationChanged2=function(e){l.setState({location2:e},(function(){w&&w.setItem("epub-location2",e)}))},l.onToggleFontSize=function(){var e=!l.state.largeText;l.setState({largeText:e},(function(){l.rendition.themes.fontSize(e?"140%":"100%")}))},l.getRendition=function(e){var t=l.state.largeText;l.rendition=e,e.themes.fontSize(t?"140%":"100%")},l.handleChangeFile=function(){var e=Object(r.a)(a.a.mark((function e(t,n){var o,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=8;break}if(o=Object(i.a)(n[0],2),r=o[0],"application/epub+zip"===(c=o[1]).type){e.next=4;break}return e.abrupt("return",alert("Unsupported type"));case 4:return s=r.target.result,e.next=7,g.a.setItem("apiprocread_cache",s).then((function(e){})).catch((function(e){console.log(e)}));case 7:l.setState({localFile:s,localName:c.name,location:null});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l.handleChangeFile2=function(){var e=Object(r.a)(a.a.mark((function e(t,n){var o,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=8;break}if(o=Object(i.a)(n[0],2),r=o[0],"application/epub+zip"===(c=o[1]).type){e.next=4;break}return e.abrupt("return",alert("Unsupported type"));case 4:return s=r.target.result,e.next=7,g.a.setItem("apiprocread_cache2",s).then((function(e){})).catch((function(e){console.log(e)}));case 7:l.setState({localFile2:s,localName2:c.name,location2:null});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l.mouse=function(e){console.log("DOWN ",e,e.target.tagName),"BUTTON"===e.target.tagName||"translateLayer-border"!==e.target.getAttribute("id")||(e.target.classList.toggle("show"),document.getElementById("translateLayer").classList.toggle("show"))},l.click=function(e){console.log(e,e.target.tagName),"BUTTON"===e.target.tagName||"translateLayer-border"!==e.target.getAttribute("id")||(e.target.classList.toggle("show"),document.getElementById("translateLayer").classList.toggle("show"))},l.state={fullscreen:!1,localFile:j||null,localName:null,location:w&&w.getItem("epub-location")?w.getItem("epub-location"):2,location2:w&&w.getItem("epub-location")?w.getItem("epub-location"):2,localFile2:E||null,localName2:null,largeText:!1},l.rendition=null,l}return Object(l.a)(o,[{key:"componentDidMount",value:function(){var e=this;g.a.getItem("apiprocread_cache").then((function(t){console.log(t),e.setState({localFile:t})})).catch((function(e){console.log(e)})),g.a.getItem("apiprocread_cache2").then((function(t){console.log(t),e.setState({localFile2:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.fullscreen,n=e.location,o=e.location2,a=e.localFile,i=e.localFile2,r=e.localName,c=e.localName2;return h.a.createElement(x.c,null,h.a.createElement(O,null),h.a.createElement(x.a,null,h.a.createElement(x.b,{className:"btns"},h.a.createElement(v.a,{as:"buffer",onChange:this.handleChangeFile},h.a.createElement(x.d,null,"Upload epub")),h.a.createElement(v.a,{as:"buffer",onChange:this.handleChangeFile2},h.a.createElement(x.d,null,"Upload Translated epub")))),h.a.createElement(x.e,{fullscreen:t},h.a.createElement(y.b,{className:"firstLayer",url:a||"",title:r||"",location:n,locationChanged:this.onLocationChanged,getRendition:this.getRendition}),h.a.createElement("a",{id:"tran-a",href:"javascript:",onClick:this.click,onMouseDown:this.mouse},h.a.createElement("div",{id:"translateLayer-border"}),h.a.createElement("div",{id:"translateLayer"},i?h.a.createElement(y.b,{url:i||"",title:c||"",location:o,locationChanged:this.onLocationChanged2,getRendition:this.getRendition}):null))))}}]),o}(p.Component);t.a=C}).call(this,n(12))},121:function(e,t,n){e.exports=n(122)},122:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(70),r=n(115);Object(i.render)(a.a.createElement(r.a,null),document.getElementById("root"))},23:function(e,t,n){"use strict";n.d(t,"c",(function(){return k})),n.d(t,"e",(function(){return w})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return C}));var o=n(5),a=n(4),i=n(29);function r(){var e=Object(o.a)(["\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n"]);return r=function(){return e},e}function c(){var e=Object(o.a)(['\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n']);return c=function(){return e},e}function l(){var e=Object(o.a)(["\n    font-size: 16px;\n\n  "]);return l=function(){return e},e}function s(){var e=Object(o.a)(["\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ",";\n"]);return s=function(){return e},e}function u(){var e=Object(o.a)(["\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n"]);return u=function(){return e},e}function d(){var e=Object(o.a)(["\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  "]);return d=function(){return e},e}function p(){var e=Object(o.a)(["\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ",";\n"]);return p=function(){return e},e}function h(){var e=Object(o.a)(["\n    margin-right: auto;\n  "]);return h=function(){return e},e}function f(){var e=Object(o.a)(["\n  ",";\n"]);return f=function(){return e},e}function g(){var e=Object(o.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  "]);return g=function(){return e},e}function b(){var e=Object(o.a)(["\n  ",";\n"]);return b=function(){return e},e}function m(){var e=Object(o.a)(["\n    display: flex;\n    align-items: flex-end;\n  "]);return m=function(){return e},e}function v(){var e=Object(o.a)(["\n  position: absolute;\n  top: 10px;\n  left: 20px;\n  right: 20px;\n\n  ",";\n"]);return v=function(){return e},e}function y(){var e=Object(o.a)(["\n  font-size: 16px;\n  position: absolute;\n  top: ","px;\n  left: ","rem;\n  right: ","rem;\n  bottom: ","rem;\n  transition: all 0.6s ease;\n  padding: 27px;\n  ",";\n"]);return y=function(){return e},e}function x(){var e=Object(o.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n  overflow: hidden;\n"]);return x=function(){return e},e}var k=a.c.div(x()),w=a.c.div(y(),(function(e){return e.fullscreen?0:60}),(function(e){return e.fullscreen?0:1}),(function(e){return e.fullscreen?0:1}),(function(e){return e.fullscreen?0:1}),(function(e){return!e.fullscreen&&"0 0 5px rgba(0,0,0,.3);"})),O=a.c.header(v(),Object(i.a)("tablet")(m())),j=a.c.div(b(),Object(i.a)("mobile")(g())),E=(a.c.a(f(),Object(i.a)("tablet")(h())),a.c.img(p(),Object(i.a)("tablet")(d())),a.c.button(u())),C=Object(a.c)(E)(s(),Object(i.a)("tablet")(l()));a.c.i(c()),Object(a.c)(E)(r())},47:function(e,t,n){"use strict";t.a={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}}},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return b}));var o=n(80),a=(n(47),n(19)),i=n(20),r=n(22),c=n(21),l=n(78),s=n(0),u=n.n(s),d=n(116),p={container:{overflow:"hidden",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:50,left:50,bottom:20,right:50},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 10px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",margintop:"-.5em"}},h=function(e){var t=e.children,n=Object(l.a)(e,["children"]),o=Object(d.useSwipeable)(n);return u.a.createElement("div",o,t)},f=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).setLocation=function(){e.props.setLocation(e.props.href)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.styles;return u.a.createElement("button",{onClick:this.setLocation,style:n},t)}}]),n}(s.PureComponent),g=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).toggleToc=function(){o.setState({expandedToc:!o.state.expandedToc})},o.next=function(){o.readerRef.current.nextPage()},o.prev=function(){o.readerRef.current.prevPage()},o.onTocChange=function(e){var t=o.props.tocChanged;o.setState({toc:e},(function(){return t&&t(e)}))},o.setLocation=function(e){var t=o.props.locationChanged;o.setState({expandedToc:!1},(function(){return t&&t(e)}))},o.readerRef=u.a.createRef(),o.state={expandedToc:!1,toc:!1},o}return Object(i.a)(n,[{key:"renderToc",value:function(){var e=this,t=this.state,n=t.toc,o=t.expandedToc,a=this.props.styles;return u.a.createElement("div",null,u.a.createElement("div",{style:a.tocArea},u.a.createElement("div",{style:a.toc},n.map((function(t,n){return u.a.createElement(f,Object.assign({},t,{key:n,setLocation:e.setLocation,styles:a.tocAreaButton}))})))),o&&u.a.createElement("div",{style:a.tocBackground,onClick:this.toggleToc}))}},{key:"renderTocToggle",value:function(){var e=this.state.expandedToc,t=this.props.styles;return u.a.createElement("button",{style:Object.assign({},t.tocButton,e?t.tocButtonExpanded:{}),onClick:this.toggleToc},u.a.createElement("span",{style:Object.assign({},t.tocButtonBar,t.tocButtonBarTop)}),u.a.createElement("span",{style:Object.assign({},t.tocButtonBar,t.tocButtonBottom)}))}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.showToc,a=e.loadingView,i=e.styles,r=e.locationChanged,c=e.swipeable,s=e.className,d=Object(l.a)(e,["title","showToc","loadingView","styles","locationChanged","swipeable","className"]),p=this.state,f=p.toc,g=p.expandedToc;return u.a.createElement("div",{className:s,style:i.container},u.a.createElement("div",{style:Object.assign({},i.readerArea,g?i.containerExpanded:{})},n&&this.renderTocToggle(),u.a.createElement("div",{style:i.titleArea},t),u.a.createElement(h,{onSwipedRight:this.prev,onSwipedLeft:this.next,trackMouse:!0},u.a.createElement("div",{style:i.reader},u.a.createElement(o.a,Object.assign({ref:this.readerRef,loadingView:a},d,{tocChanged:this.onTocChange,locationChanged:r})),c&&u.a.createElement("div",{style:i.swipeWrapper}))),u.a.createElement("button",{style:Object.assign({},i.arrow,i.prev),onClick:this.prev},"\u2039"),u.a.createElement("button",{style:Object.assign({},i.arrow,i.next),onClick:this.next},"\u203a")),n&&f&&this.renderToc())}}]),n}(s.PureComponent);g.defaultProps={loadingView:u.a.createElement("div",{style:p.loadingView},"Loading\u2026"),locationChanged:null,tocChanged:null,showToc:!0,styles:p};var b=g},80:function(e,t,n){"use strict";(function(e){var o=n(120),a=n(19),i=n(20),r=n(22),c=n(21),l=n(0),s=n.n(l),u=n(73),d=n.n(u),p=n(47);e.ePub=d.a;var h=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onLocationChange=function(e){var t=o.props,n=t.location,a=t.locationChanged,i=e&&e.start;n!==i&&(o.location=i,a&&a(i))},o.handleKeyPress=function(e){var t=e.key;t&&"ArrowRight"===t&&o.nextPage(),t&&"ArrowLeft"===t&&o.prevPage()},o.state={isLoaded:!1,toc:[]},o.viewerRef=s.a.createRef(),o.location=e.location,o.book=o.rendition=o.prevPage=o.nextPage=null,o}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.initBook(!0),document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"initBook",value:function(){var e=this,t=this.props,n=t.url,o=t.tocChanged,a=t.epubInitOptions;this.book&&this.book.destroy(),this.book=new d.a(n,a),this.book.loaded.navigation.then((function(t){var n=t.toc;e.setState({isLoaded:!0,toc:n},(function(){o&&o(n),e.initReader()}))}))}},{key:"componentWillUnmount",value:function(){this.book=this.rendition=this.prevPage=this.nextPage=null,document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"shouldComponentUpdate",value:function(e){return!this.state.isLoaded||e.location!==this.props.location||e.location!==this.props.location}},{key:"componentDidUpdate",value:function(e){e.location!==this.props.location&&this.location!==this.props.location&&this.rendition&&this.rendition.display(this.props.location),e.url!==this.props.url&&this.initBook()}},{key:"initReader",value:function(){var e=this,t=this.state.toc,n=this.props,a=n.location,i=n.epubOptions,r=n.getRendition,c=this.viewerRef.current;this.rendition=this.book.renderTo(c,Object(o.a)({contained:!0,width:"100%",height:"100%"},i)),this.prevPage=function(){e.rendition.prev()},this.nextPage=function(){e.rendition.next()},this.registerEvents(),r&&r(this.rendition),"string"===typeof a||"number"===typeof a?this.rendition.display(a):t.length>0&&t[0].href?this.rendition.display(t[0].href):this.rendition.display()}},{key:"registerEvents",value:function(){var e=this.props,t=e.handleKeyPress,n=e.handleTextSelected;this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",t||this.handleKeyPress),n&&this.rendition.on("selected",n)}},{key:"renderBook",value:function(){var e=this.props.styles;return s.a.createElement("div",{ref:this.viewerRef,style:e.view})}},{key:"render",value:function(){var e=this.state.isLoaded,t=this.props,n=t.loadingView,o=t.styles;return s.a.createElement("div",{style:o.viewHolder},e&&this.renderBook()||n)}}]),n}(l.Component);h.defaultProps={loadingView:null,locationChanged:null,tocChanged:null,styles:p.a,epubOptions:{},epubInitOptions:{}},t.a=h}).call(this,n(12))}},[[121,1,2]]]);
//# sourceMappingURL=main.e3b36b15.chunk.js.map